# STR AI Dashboard - Project Requirements Document

## 1. Project Overview

The STR AI Dashboard is an AI-powered automation platform designed to help short-term rental property managers handle day-to-day tasks more efficiently. It brings together a suite of AI agents, each tailored to execute specific tasks—from rewriting property listings to generating owner reports—and an AI Chatbot that taps into an internal knowledge base. With the initial version built as an MVP, the dashboard is deployed in a single-tenant mode (one Docker container per client) and does not include user authentication. The overall goal is to simplify property management tasks while delivering near real-time responses through seamless integration with external workflows.

We are building this platform to automate repetitive tasks, improve operational efficiency, and provide property managers with actionable insights. The project's key objectives are to offer a modern, responsive UI inspired by ChatGPT interfaces, ensure smooth integration with external tools like N8N for automation, and maintain detailed logs of every operation for accountability. Success will be measured by system responsiveness, reliability of AI-generated outputs, and user satisfaction with the intuitive dashboard design.

## 2. In-Scope vs. Out-of-Scope

### In-Scope:

*   **AI Agents:**

    *   Button-triggered AI agents capable of tasks such as listing rewriting, review analyzing, owner report generation, price optimization, maintenance planning, and guest communication.
    *   Integration with external N8N workflows via webhooks, with execution details logged to the Supabase database.

*   **AI Chatbot:**

    *   A chatbot that relies on a Retrieval-Augmented Generation (RAG) system using Supabase and pgvector for document search combined with Azure OpenAI for generating responses.

*   **Document Management:**

    *   Ability to upload, manage, and search documents (supporting file types like .txt, .md, .pdf, and .docx) by splitting them into ~300-token chunks, embedding them using OpenAI's embedding API, and storing these in a Supabase table.

*   **User Interface:**

    *   A modern, responsive UI with a purple color scheme, left sidebar navigation, and card-based layout incorporating loading state animations.

*   **API Routes & Logging:**

    *   Dynamic API routes for AI agents and related functionality, with structured logging to track agent executions in a Supabase table.

### Out-of-Scope:

*   **User Authentication & Multitenancy:**

    *   The initial version does not include user authentication or advanced tenant-specific user management; deployments are run as single-tenant Docker containers.

*   **Automated Deployment:**

    *   Manual deployment per client is expected in this MVP phase, with no automated multi-tenant deployment mechanisms in place.

*   **External Integrations Beyond N8N:**

    *   While N8N is used for agent-specific tasks, no additional workflow automation or third-party service integrations are planned for the MVP.

*   **Advanced Customization:**

    *   Deep customization, theming, or personal dashboard configurations for clients will be addressed in later phases.

## 3. User Flow

When a user first accesses the STR AI Dashboard, they are greeted by a modern, chat-styled landing page. The page features a left sidebar that offers clear navigation options including AI Chat, AI Agents, Documents, and Contact Us. This landing page sets the tone with visual icons and subtle animations that hint at the interactive capabilities. After the initial view, users can immediately choose which feature to explore based on intuitive design cues and the clearly labeled sections.

While exploring, a user can start by interacting with the AI Chat feature where they input a query and receive context-aware responses generated by the system using their internal documents and guides. Alternatively, users can select one of the available AI agents by clicking the corresponding button; this sends the request through a dynamic API route to an N8N webhook that processes the task. Every action is tracked and logged, making it easy for the user to review task histories and outcomes. Additionally, the documentation section allows users to upload and manage files, ensuring that the knowledge base remains current and useful for generating precise outputs.

## 4. Core Features

*   **AI Agents:**

    *   Task-specific automation bots triggered by UI buttons.
    *   Integration with N8N webhooks for tasks like listing rewriting, review analyzing, owner report generating, price optimization, maintenance planning, and guest communication.
    *   Logging of execution details to Supabase for traceability.

*   **AI Chatbot:**

    *   A conversational interface that accesses internal documentation and SOPs through a Retrieval-Augmented Generation (RAG) system.
    *   Uses Supabase with pgvector for document search and Azure OpenAI for generating answer responses.

*   **Document Management:**

    *   Upload support for files (.txt, .md, .pdf, .docx).
    *   Automatic splitting of documents into ~300-token chunks and embedding them through the OpenAI embedding API.
    *   Storage of document content and vector embeddings in a dedicated Supabase table.

*   **User Interface and Experience:**

    *   Modern, ChatGPT-style interface with a purple-based color scheme and Boomnow-inspired design.
    *   Responsive layout with a left sidebar for navigation, card-based grid layout, and icons to improve usability.
    *   Loading state animations that provide visual feedback during agent task execution.

*   **API & Logging:**

    *   Dynamic API endpoints (e.g., /api/agent/[agent]) handling routing of requests to suitable N8N webhooks.
    *   Detailed logging of AI agent requests and responses in Supabase for future auditing and troubleshooting.

## 5. Tech Stack & Tools

*   **Frontend:**

    *   Next.js 15.2.3 (using the App Router for dynamic routing)
    *   React 19 for creating interactive UI components
    *   TypeScript 5 for type safety and code clarity
    *   Tailwind CSS v4 for utility-first responsive design
    *   Lucide React Icons for modern, scalable icons

*   **Backend:**

    *   Node.js 18+ serving as the runtime environment
    *   Supabase JS v2 with pgvector for database management and semantic search
    *   Azure OpenAI SDK v4 for AI text generation and chatbot responses
    *   N8N for external workflow automation via webhooks
    *   Axios for HTTP requests
    *   Docker for containerized deployment

*   **Additional Tools:**

    *   V0 by Vercel for AI-powered frontend component building
    *   Cursor for advanced IDE support and real-time coding suggestions
    *   Claude 3.7 Sonnet and Claude 3.5 Sonnet for intelligent code assistance
    *   GPT 4o and GPT o1 for advanced AI-powered code generation

## 6. Non-Functional Requirements

*   **Performance:**

    *   The dashboard should load within 2-3 seconds under normal network conditions.
    *   AI agent executions and AI Chat responses should be delivered promptly (ideally within a few seconds).

*   **Security:**

    *   Sensitive keys and credentials (Azure OpenAI, Supabase, N8N webhook URLs) must be stored in environment variable files and never hardcoded.
    *   Communication between the dashboard and backend should use secure protocols (HTTPS).

*   **Compliance & Data Integrity:**

    *   Ensure that logging and storage of data in Supabase adhere to best practices for data integrity and potential audits.
    *   Use proper sanitization for any user inputs that are processed by the system.

*   **Usability:**

    *   The UI should be easy to navigate with clear call-to-actions and responsive design for various screen sizes.
    *   Ensure clear visual feedback during processing (e.g., loading animations) and error messaging to enhance user experience.

## 7. Constraints & Assumptions

*   **Constraints:**

    *   The MVP is a single-tenant system deployed manually as a separate Docker container per client, meaning multi-user support and automated scaling are not available initially.
    *   Integration with AI models (i.e., Azure OpenAI and OpenAI’s embedding services) requires stable internet connectivity and availability of these services.
    *   The platform relies on external N8N webhooks for task automation, meaning any rate limits or downtime in N8N can affect agent functionality.

*   **Assumptions:**

    *   It is assumed that the environment will have access to the required cloud services and that environment variables will be properly set up during deployment.
    *   The design is based on a scenario where users are property managers familiar with technology, minimizing the need for extensive onboarding.
    *   Developers and system integrators have access to the detailed configuration documentation (like CONFIG.md, DB_SCHEMA.md, N8N_WEBHOOK.md) which outlines the specifics of API routes, database structure, and webhook payload conventions.

## 8. Known Issues & Potential Pitfalls

*   **API Rate Limits & External Dependencies:**

    *   Dependence on external services like Azure OpenAI and N8N may expose the system to rate limits or downtime. Mitigation can include implementing retry mechanisms and clear user error messages.

*   **Docker Deployment Complexity:**

    *   Manual Docker deployments per client could lead to configuration inconsistencies. Keeping detailed deployment instructions and container configuration templates will help reduce errors.

*   **Dynamic Routing and Logging:**

    *   Dynamic API routes for different AI agents may lead to potential misrouting if the config file mapping is incorrect. Ensure robust error handling and logging to capture issues early.

*   **Document Embedding Performance:**

    *   The process of splitting and embedding documents might become slow if file sizes are large. Consider adding asynchronous processing or queue mechanisms to handle large uploads reliably.

This document serves as the single source of truth for understanding the STR AI Dashboard’s objectives, feature scope, user flow, tech stack, and potential challenges. All subsequent technical documents will reference this PRD to ensure consistency and clarity in development.
